# SynoPlayer - 群晖 QuickConnect 登录工具

一个用于群晖 NAS 快速登录的 Flutter 跨平台应用，支持 QuickConnect 地址解析、二次认证（OTP）和详细的登录流程日志。

## 🚀 主要功能

### 1. QuickConnect 地址解析
- 自动解析 QuickConnect ID 获取可用连接地址
- 优先使用直连公网地址，其次使用中继地址
- 实时显示解析过程和结果

### 2. 连接测试
- 自动测试解析出的地址是否可访问
- 显示连接状态（正常/异常）
- 支持手动重新测试连接

### 3. 智能登录流程
- 支持用户名/密码登录
- 自动检测是否需要二次验证（OTP）
- 动态显示 OTP 输入字段
- 详细的登录过程日志

### 4. 完整的错误处理
- 网络请求超时处理
- 详细的错误信息显示
- 异常情况的友好提示

## 📱 支持的平台

- ✅ Android
- ✅ iOS  
- ✅ Web
- ✅ Windows
- ✅ macOS
- ✅ Linux

## 🛠️ 技术特性

- **框架**: Flutter 3.8.1+
- **语言**: Dart
- **网络**: HTTP 请求，支持超时设置
- **UI**: Material Design 3，响应式布局
- **日志**: 实时日志显示，支持清空操作

## 🔧 安装和运行

### 环境要求
- Flutter SDK 3.8.1 或更高版本
- Dart SDK
- 支持的操作系统

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd synoplayer
```

2. 安装依赖
```bash
flutter pub get
```

3. 运行应用
```bash
# 调试模式
flutter run --debug

# 发布模式
flutter run --release
```

## 📖 使用说明

### 1. 启动应用
启动应用后，你会看到一个简洁的登录界面。

### 2. 解析 QuickConnect 地址
1. 在 "QuickConnect ID" 字段输入你的群晖 QuickConnect ID
2. 点击 "解析地址" 按钮
3. 系统会自动解析并显示可用的连接地址
4. 自动测试连接可用性

### 3. 登录群晖 NAS
1. 地址解析成功后，输入你的群晖用户名和密码
2. 点击 "登录" 按钮
3. 如果启用了二次验证，系统会提示输入 OTP 验证码
4. 输入 OTP 后，点击 "使用 OTP 登录" 按钮

### 4. 查看操作日志
- 所有操作都会在底部的日志区域实时显示
- 日志包含时间戳和详细的操作信息
- 可以使用右上角的刷新按钮清空日志

## 🔐 二次认证（OTP）说明

群晖 NAS 支持多种二次认证方式：
- **Google Authenticator**: 6位数字验证码
- **短信验证**: 手机短信验证码
- **邮件验证**: 邮箱验证码

当登录需要二次验证时：
1. 应用会自动检测并显示 OTP 输入字段
2. 在相应的认证应用中获取验证码
3. 输入验证码后重新登录

## 📊 日志信息说明

### 地址解析日志
- `🔍 开始解析 QuickConnect 地址...` - 开始解析过程
- `✅ 地址解析成功: [地址]` - 解析成功
- `❌ 地址解析失败` - 解析失败

### 连接测试日志
- `✅ 连接测试成功，可以继续登录` - 连接正常
- `❌ 连接测试失败，请检查网络或 QuickConnect ID` - 连接异常

### 登录流程日志
- `🔐 开始登录流程...` - 开始登录
- `🎉 登录成功! SID: [SID]` - 登录成功
- `⚠️ 需要二次验证 (OTP)` - 需要输入 OTP
- `❌ 登录失败: [错误信息]` - 登录失败

## 🐛 常见问题排查

### 1. 地址解析失败
- 检查 QuickConnect ID 是否正确
- 确认网络连接正常
- 检查群晖 NAS 是否在线

### 2. 连接测试失败
- 检查防火墙设置
- 确认 QuickConnect 服务已启用
- 尝试使用中继地址连接

### 3. 登录失败
- 检查用户名和密码是否正确
- 确认账户未被锁定
- 检查是否需要二次验证

### 4. OTP 验证失败
- 确认验证码输入正确
- 检查验证码是否过期
- 确认时间同步正确

## 🔒 安全说明

- 所有网络通信使用 HTTPS 加密
- 密码和 OTP 不会在本地存储
- 建议在安全网络环境下使用
- 定期更换密码和 OTP 密钥

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 📄 许可证

本项目采用 MIT 许可证。

## 📞 支持

如果你遇到问题或有建议，请：
1. 查看日志信息进行问题排查
2. 提交 GitHub Issue
3. 联系项目维护者

---

**注意**: 这是一个工具应用，请确保你有权限访问目标群晖 NAS 设备。
